let userId=1,otherUserId=2;var restaurantChoices={choice1:null,choice2:null};let baseURL="https://bnqukaif.apiadmin.co.uk/api/";var database,restaurants=null;function getRestaurants(){getApiRequest("restaurants").then(function(e){$("#waiting").show(),restaurants=e.Restaurants,setUpRestaurants(),setUpRecommendations(),$("#waiting").hide(),$("#recommendations").show()})}function setUpRecommendations(){$(".recommendation").click(function(e){var t=parseInt(this.dataset.value);null===restaurantChoices.choice1?(restaurantChoices.choice1=t,this.classList.add("first")):(restaurantChoices.choice2=t,writeRestaurantData(userId),$(this.parentElement).hide(),database.ref("users/"+otherUserId+"/restaurants").on("value",function(e){e.val()?(setUpWinningRestaurant(),$("#waiting").hide(),$("#restaurant").show()):($("#restaurant").hide(),$("#waiting").show())}))})}function setUpRestaurants(){restaurants.forEach(e=>{$("#recommendations").append('<button class="recommendation" id="recommendation'+e.Id+'" data-value="'+e.Id+'">   <h2>'+e.Name+"</h2></button>")})}function setUpWinningRestaurant(){database.ref("/users/"+userId).once("value").then(function(e){database.ref("/users/"+otherUserId).once("value").then(function(t){var a=e.val().restaurants,s=t.val().restaurants;getApiRequest("restaurant"+(a.choice1===s.choice1?a.choice1:a.choice1===s.choice2?a.choice1:a.choice2)).then(function(e){$("#restaurant").append(`<div>${e.Name}</div>`)})})})}function getApiRequest(e){return $.get(`${baseURL}${e}`)}function getMenu(){$.get(`${baseUrl}`,function(e){})}function writeRestaurantData(e){database.ref("users/"+e).set({restaurants:restaurantChoices})}$(document).ready(function(){firebase.initializeApp({apiKey:"AIzaSyB47VwRgy6QFWAl6uJeFEeO_dedKERTiM8",authDomain:"pickyapp-1.firebaseapp.com",databaseURL:"https://pickyapp-1.firebaseio.com",projectId:"pickyapp-1",storageBucket:"pickyapp-1.appspot.com",messagingSenderId:"779693509357"}),database=firebase.database(),$("#set-user-1").click(function(){userId=1,otherUserId=2,getRestaurants(),$("#user-set").hide()}),$("#set-user-2").click(function(){userId=2,otherUserId=1,getRestaurants(),$("#user-set").hide()})});